FROM fedora:41

# Instalamos shadow-utils que contiene useradd y usermod
RUN dnf -y install shadow-utils sudo && dnf clean all

# Forzamos la creaciÃ³n del usuario y verificamos en la misma capa
RUN useradd -m -s /bin/bash willians && \
    echo "willians ALL=(ALL) NOPASSWD:ALL" > /etc/sudoers.d/willians && \
    chmod 0440 /etc/sudoers.d/willians && \
    id willians && \
    ls -ld /home/willians

# Sincronizamos permisos
RUN mkdir -p /home/willians/laravel && \
    chown -R willians:willians /home/willians

USER willians
WORKDIR /home/willians
CMD ["/bin/bash"]